# continue.txt

Last updated: 2026-02-11

## Load order on restart
1. `CLEARCASE_HANDOFF.txt` (authoritative product/architecture constraints)
2. `continue.txt` (this file, quick resume snapshot)
3. `SESSION_LOG.md` (most recent entry)
4. `NEXT_STEPS.md` (current phase + immediate tasks)

## Current state
- Repo: `C:\Clearcase\Clearcase`
- Branch: `main` (synced to `origin/main`)
- Latest backup commit: `1471872`
- Current phase: `Phase 7 - LLM Formatting (Implemented, verification pending)`

## Completed phases
- Phase 3 complete: S3 upload-init endpoint + ownership + asset metadata persistence
  - Verify: `npm run mvp:phase3-smoke`
- Phase 4 complete: SQS worker consume/ack/retry basics
  - Verify: `npm run mvp:phase4-smoke`
- Phase 5 complete: OCR adapter boundary (deterministic stub) + extraction persistence
  - Verify: `npm run mvp:phase5-smoke`
- Phase 6 implementation complete: truth-layer transformer + case truth persistence + `TRUTH_LAYER_RUN` audit event
  - Verify: `npm run mvp:phase6-smoke` (requires AWS/SQS connectivity)
- Phase 7 implementation complete: deterministic formatter + verdict persistence + `LLM_FORMAT_RUN` audit event
  - Verify: `npm run mvp:phase7-smoke` (requires AWS/SQS connectivity)

## Runtime scripts
- API dev: `npm run api:dev`
- API start: `npm run api:start`
- Worker start: `npm run worker:start`
- Preflight: `npm run mvp:preflight`
- AWS readiness: `npm run mvp:aws-check`
- Phase 6 smoke: `npm run mvp:phase6-smoke`
- Phase 7 smoke: `npm run mvp:phase7-smoke`
- Backup (commit + push): `npm run mvp:backup`

## Environment expectations (`.env`)
- Required and already configured locally:
  - `DATABASE_URL`
  - `AWS_REGION`
  - `S3_BUCKET`
  - `AWS_ACCESS_KEY_ID`
  - `AWS_SECRET_ACCESS_KEY`
  - `SQS_QUEUE_URL`
- Do not print or commit secret values.

## Immediate next work
1. Run `npm run mvp:phase6-smoke` and `npm run mvp:phase7-smoke` in network-enabled execution and confirm live SQS flows.
2. Mark Phase 6 and Phase 7 complete after smoke success.
3. Begin stabilization pass (idempotency, replayability, error handling).

## Working rules
- Keep Prisma schema unchanged unless strictly required.
- Batch mode execution: do not pause for routine non-destructive steps.
- Only pause on destructive actions.
- Run `npm run mvp:backup` at the end of each work block.

## Skills installed (Codex)
- `find-skills`
- `security-threat-model`
- `security-best-practices`
- `playwright`
- `pdf`

Note: restart Codex to pick up newly installed skills.
